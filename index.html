<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Evaluate a bulk of *.csv files in one directory, produced by Purency. 
    It will count occurrences of of fibres, fragments, spheres and pixels, as well as (customisable 
    size fractions for each polymer. Each 
    file (i.e., each measurement) is evaluated separately, as well as summarized 
    for all files (i.e., one sample). Also the blank correction is done during the processing.
    For each sample a new excel file will be generated
    in the folder where the files are placed. The function is highly customisable and each 
    parameter can be changed to your desire.">
<title>Automated Evaluation of Purency Data • evalPurency</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Automated Evaluation of Purency Data">
<meta property="og:description" content="Evaluate a bulk of *.csv files in one directory, produced by Purency. 
    It will count occurrences of of fibres, fragments, spheres and pixels, as well as (customisable 
    size fractions for each polymer. Each 
    file (i.e., each measurement) is evaluated separately, as well as summarized 
    for all files (i.e., one sample). Also the blank correction is done during the processing.
    For each sample a new excel file will be generated
    in the folder where the files are placed. The function is highly customisable and each 
    parameter can be changed to your desire.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">evalPurency</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.5.9017</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/evalPurency.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Maki-science/evalPurency/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="evalpurency">evalPurency<a class="anchor" aria-label="anchor" href="#evalpurency"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="microplastic-finder-from-purency">Microplastic Finder from Purency<a class="anchor" aria-label="anchor" href="#microplastic-finder-from-purency"></a>
</h2>
<p>Microplastics can be found in any part of an environmental or nutritional sample. Today, FPA-based FTIR imaging allows a whole sample to be measured quickly. However, to analyse the measurement data, a powerful tool is needed to reliably identify the polymer particles contained in the sample. The analysis must provide objective, complete and robust results, which are presented in detail and transparently. The Microplastics Finder by Purency uses machine learning algorithms that identify more than 20 polymer types within minutes. In combination with FTIR imaging, it offers the fastest method to examine an entire sample for microplastics. Thanks to automation, which does not require time-consuming manual post-processing, the analysis results are optimally comparable and reproducible. Microplastics analysis becomes scalable and new types of questions about the presence and origin of microplastics can be answered. <em>Source: <a href="https://www.purency.ai/product1/microplastics-finder" class="external-link uri">https://www.purency.ai/product1/microplastics-finder</a>)</em></p>
</div>
<div class="section level2">
<h2 id="purpose-of-this-package">Purpose of this package<a class="anchor" aria-label="anchor" href="#purpose-of-this-package"></a>
</h2>
<p>Commonly in microplastic research, a sample is splitted and filtered on several filters. These filters have to be measured separately via FTIR and can be then evaluated using the Purency software (<a href="https://www.purency.ai/" class="external-link uri">https://www.purency.ai/</a>). This produces *.csv files for each measurement.</p>
<p>This package and its functions can be used to automate the single file handling and gathering the relevant data for each sample into one file. The processing requires only a few seconds instead of hours (of copying and pasting) in manual work. Furthermore, the chance of mistakes is reduced by generic computation.</p>
<p>It will count occurrences of fibres, fragments, spheres and pixels, as well as different (customisable) size fractions for each polymer. Each file (i.e., each measurement) is evaluated separately, as well as summarized for all files (i.e., one sample). Also the blank correction and correction for filter division is done by this function. For each sample a new excel file will be generated in the folder where the files are placed in. One file for each sample and one additional file, containing the data of different processing steps (also raw data) to allow a full track of the processing, if required. If desired, the function returns a list object to the R environment with all produced data sets, which can be used for further processing in R.</p>
<p>The default parameter settings are based on the requirements of the animal ecology I group (AG Laforsch) of the University of Bayreuth. However, the function is highly customisable, and you can change all parameters to your desire. Read further below for detailed instruction what and how you can/should change.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>After the corresponding paper is published, you should be able to download this package from CRAN (watch the badge on the top of this page). Just go to the upper tool bar of your RStudio and click <em>tools</em> &gt; <em>Install Packages…</em> &gt; tipe in <em>evalPurency</em> &gt; click <em>install</em>.</p>
<p>You can also install the development version of evalPurency from <a href="https://github.com/" class="external-link">GitHub</a>. If not already installed, you need to have Rtools installed on your system to be able to compile the development version <em>(<a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link uri">https://cran.r-project.org/bin/windows/Rtools/</a>)</em>. (devtools only has to be installed once)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span> <span class="co"># just necessary if not already installed</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Maki-science/evalPurency"</span><span class="op">)</span></span></code></pre></div>
<p>Once installed, you don’t need to repeat this step each time! If you want to update to the newest version, just run the second line again.</p>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<p>The (pre-)Purency workflow usually produces several filters (or measurements) for each sample. We highly recommend to adopt a common file-naming procedure. The function uses everything of the .csv file names before the first ’_’ (underline) as sample name. The rest is considered as filter/measurement (e.g., SAMPLENAME_Filter1of3). This also allows for one blank for multiple filters/samples from one location (i.e., replicates), by naming the samples accordingly.</p>
<p>Here are some examples how to apply the naming for different blank application:</p>
<p>For each sample one or more own blank filters. You can still have several filters for each sample and/or blank, which are summed together before processing:</p>
<ul>
<li>Samples: SAMPLENAME1_Filter1, SAMPLENAME2_Filter1</li>
<li>Blanks: SAMPLENAME1Blank_Filter1, SAMPLENAME2Blank_filter1</li>
</ul>
<p>Samples should use the same blank(s):</p>
<ul>
<li>Samples: SAMPLENAME1_Filter1, SAMPLENAME2_Filter1</li>
<li>Blank: SAMPLENAMEBlank_Filter1 (notice the missing number)</li>
</ul>
<p>You have several blanks, but they should be averaged as combined blank for your samples (still, each blank can constitute several filters that are summed before averaging over the blanks):</p>
<ul>
<li>Samples: SAMPLENAME1_Filter1, SAMPLENAME2_Filter1</li>
<li>Blanks: SAMPLENAME1Blank1_Filter1, SAMPLENAME1Blank2_filter1, SAMPLENAME2Blank1_Filter1, SAMPLENAME2Blank2_filter1 (note the number (or any other sign) behind ‘Blank’ but before ’_’)</li>
</ul>
<p>You want to use one (or several averaged) blanks for all samples:</p>
<ul>
<li>Samples: PREFIXSAMPLENAME1_Filter1, PREFIXSAMPLENAME2_Filter1 (set a prefix)</li>
<li>Blanks: PREFIXBlank_Filter1, PREFIXBLank_filter1 (use the same prefix but directly state ‘Blank_’)</li>
</ul>
<p>You can also use a mix of all those versions, if necessary, though, we think this might be a bad sampling design.</p>
<p>If you don’t have any blanks to process, you can skip the blank processing with setting <em>noBlank = TRUE</em>.</p>
<p><em>WARNING: The naming of the files is an important prerequisite for a proper processing. Thus you need to cautiously set your file names!</em></p>
<p>Put all files you want to process including their blank files into one folder. We recommend to put all files of a certain project/study or similar into one folder and process them at once.</p>
<p>To use the package function, just load the package as usual:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Maki-science/evalPurency" class="external-link">evalPurency</a></span><span class="op">)</span></span></code></pre></div>
<p>Now simply run the follwing line, but change the path accordingly to the location where you stored your files to be processed. Make sure to use (or change) ‘/’ and not ‘\’, since only windows uses backslashes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span><span class="op">)</span> <span class="co"># or similar</span></span></code></pre></div>
<p>The ‘/’ in the end is required! Copy and paste this line into the console and press ‘enter’.</p>
<p><em>WARNING: This runs the function with its default configuration. You might need to adopt some further parameters. See below for details.</em></p>
<p><em>WARNING: Make sure that your csv file has the correct column separator (; in default) and decimal sign (, in default). Otherwise read further below how to change it in the function, or make sure to save the csv file properly.</em></p>
<p>The function will warn you if there are missing values at some files. The respective files and columns are reported. Once it finished the processing it will message that it is done.</p>
<p>It will usually need just very few seconds to process e.g. 100 files. An excel file for each sample is created in the selected folder where the sample results are summarized. For all files there is one additional file with the processing data. There you can find data sets of each processing step on separate sheets (also raw data), so you can trace back the calculation and/or load parts of the data into R if required without running the whole function again.</p>
<p>For compatibility the Excel files are of an old version. Therefore, there might occur a message about potential broken file that you have to confirm. However, the warning can be ignored. Note that the excel file will be coded with ‘.’ as decimal sign!</p>
<div class="section level3">
<h3 id="perform-particle-wise-processing">Perform particle wise processing<a class="anchor" aria-label="anchor" href="#perform-particle-wise-processing"></a>
</h3>
<p>In some cases it might be necessary to perform the processing and blank correction with a particle list. The aim here is, to keep each particle as such in the list, but still allow a correction for blank particles. Therefore, we created <em>evalPurency.particles()</em>. It mainly uses the area of each particle as size reference. In case of several blanks per sample, most similar particles across blank replicates will be averaged, while the blank correction is performed by searching the most similar particles within a certain range and then substract that particle from the list. This preserves each particle and its traits, e.g., for simulation purposes, while still allowing a rather conservative blank correction. Details are described below.</p>
<div class="section level4">
<h4 id="how-to-use-evalpurencyparticles">How to use evalPurency.particles()<a class="anchor" aria-label="anchor" href="#how-to-use-evalpurencyparticles"></a>
</h4>
<p>As before, simply load the library command after the package have been installed:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Maki-science/evalPurency" class="external-link">evalPurency</a></span><span class="op">)</span></span></code></pre></div>
<p>Make sure that the files are named according to your requirements for blank processing. The same rules apply as for <em>evalPurency</em> (see above).</p>
<p>If no further requirements have to be fulfilled, the function can be run with just the path of the files to be processed:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.particles.html">evalPurency.particles</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span><span class="op">)</span> <span class="co"># or similar</span></span></code></pre></div>
<p>For further functionality, most of the parameters below can also be applied for this function. However, in case of <em>sizeclasses</em>, the function uses the squared value of each size class for categorization. This is because it seemed more intuitive to use simple edge lengths for the categorization, since a size class for an area of 22,500 (edge length of 150 µm) is rather abstract.</p>
<p>Further, the area of fibres is recalculated according to the manually measured actual length of fibres. Purencys’ Microplastic Finder does not calculate the length of fibres correctly, since it just takes the distance from edge to edge. Changing angles are not considered, why the proper length is measured manually. As probably most suitable approximation of the real area of a fibre, the function multiplies the width by the actual (manually measured) length. This recalculated area can be found in the output file.</p>
</div>
<div class="section level4">
<h4 id="output-of-evalpurencyparticles">Output of evalPurency.particles()<a class="anchor" aria-label="anchor" href="#output-of-evalpurencyparticles"></a>
</h4>
<p>This function creates one *.xls file, ‘processing_data’. Here, you can find several sheets with the processed sample particles, processed blanks, removed sample and blank particles, and the raw sample and blank data. These data reflect each step of the processing. The sheets on removed particles include a column where it is stated, how the particle was processed (each particle gets an index to track each action of the function).</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="additional-parameters">Additional parameters<a class="anchor" aria-label="anchor" href="#additional-parameters"></a>
</h2>
<p>The function is made fully dynamic and customisable. You can choose the options further below and combine them to your desire.</p>
<div class="section level3">
<h3 id="changing-separator-and-decimal-sign-in-csv-files">Changing separator and decimal sign in csv-files<a class="anchor" aria-label="anchor" href="#changing-separator-and-decimal-sign-in-csv-files"></a>
</h3>
<p>Depending on the habits of the country and/or system configuration, the csv files might be different. In default, the function uses ‘;’ as separator, indicating a new column in the csv file, and ‘,’ as a decimal sign. Change it to your liking by adding <em>sep = “;”</em> and <em>dec = “,”</em> and change the sign within the quotes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>,</span>
<span>            sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>            dec <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-not-the-recommended-file-naming">Use not the recommended file naming<a class="anchor" aria-label="anchor" href="#use-not-the-recommended-file-naming"></a>
</h3>
<p>If you choose not to call your blank files as recommended (MYSAMPLENAMEBlank - with a capital <em>B</em>) you should change it accordingly. We chose to use case sensitivity here to prevent accidental choice of the wrong files as blanks. Here an example with a noncapital <em>b</em> (i.e., MYSAMPLENAMEblank):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>,</span>
<span>            blankKey <span class="op">=</span> <span class="st">"blank"</span><span class="op">)</span></span></code></pre></div>
<p><em>WARNING: The rest of the naming recommendation, we would still recommend to adopt. However, feel free to adapt it to your liking as long as the division with the _ (underline), and the positioning of the blank in the sample name is provided.</em></p>
</div>
<div class="section level3">
<h3 id="change-evaluated-polymers">Change evaluated polymers<a class="anchor" aria-label="anchor" href="#change-evaluated-polymers"></a>
</h3>
<p>At the current state, the function evaluates up to 22 polymers (see example). If you would like to add polymers, or just evaluate some of them, you can overwrite the default setting by simply change the content of the ‘c(…)’ accordingly (make sure, that the content is not ending with a , like (… ,). Just delete or add the (un)desired polymers.</p>
<p><em>WARNING: If you have named the polymers differently in your Purency software, you should set these accordingly here.</em></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>            polymers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PU"</span>, <span class="st">"EVAc"</span>, <span class="st">"PA"</span>, <span class="st">"PAN"</span>, <span class="st">"PBT"</span>, <span class="st">"PET"</span>, <span class="st">"PE"</span>, <span class="st">"PMMA"</span>, <span class="st">"PP"</span>, </span>
<span>                         <span class="st">"POM"</span>, <span class="st">"PS"</span>, <span class="st">"PVC"</span>, <span class="st">"PC"</span>, <span class="st">"ABS"</span>, <span class="st">"PPSU"</span>, <span class="st">"CA"</span>, <span class="st">"PEEK"</span>, <span class="st">"EVOH"</span>, </span>
<span>                         <span class="st">"PSU"</span>, <span class="st">"SILICONE"</span>, <span class="st">"PLA"</span>, <span class="st">"PLAPBAT"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="change-evaluated-size-classes">Change evaluated size classes<a class="anchor" aria-label="anchor" href="#change-evaluated-size-classes"></a>
</h3>
<p>The size classes that should be evaluated by the function can be set manually. The function will dynamically switch to the desired size classes. It will sum the numbers from 0 to the first number (e.g., &lt;=10. Then it will always exclude the lower number and include the upper number (e.g., &gt;10 to &lt;= 20, &gt;20 to &lt;= 50, …). Finally, the highest number to infinite (e.g., &gt;500).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>            sizeclasses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">150</span>, <span class="fl">200</span>, <span class="fl">250</span>, <span class="fl">300</span>, <span class="fl">350</span>, <span class="fl">400</span>, <span class="fl">450</span>, <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="you-analysed-only-parts-of-a-sample">You analysed only parts of a sample?<a class="anchor" aria-label="anchor" href="#you-analysed-only-parts-of-a-sample"></a>
</h3>
<p>In many cases it can happen, that only a part of a sample is measured, if there are too many particles. This might be different between sample and blanks (e.g., it might be that a filter breaks appart). Therefore, you can provide a division factor for each sample and blank separately, or even for each filter separately.</p>
<p>However, to keep it simple and prevent mistakes, you only set <em>setDivFactor</em> when calling the function. There are three options available: <em>setDivFactor = FALSE</em> will ignore this parameter (default). If <em>setDivFactor = “samplewise”</em>, this will cause the function to request the required values during the processing for each sample (i.e., all filters of one sample have the same factor). If set to <em>setDivFactor = “filterwise”</em>, a division factor will be requested for each filter separately.</p>
<p>Just watch your R console and follow the instructions.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>            setDivFactor <span class="op">=</span> <span class="st">"samplewise"</span><span class="op">)</span></span></code></pre></div>
<p>If you only use a quarter of your sample the factor you should provide here is 0.25. If you did not divide a sample it is 1.</p>
<p>We implemented these two ways, to reduce the effort and possibility of mistakes in typing in the factors, if they are similar for all filters of a sample, but still provide the opportunity to choose the factors for each filter, in case there have been issues during the sample preparation, causing different factors for each filter.</p>
<p><em>WARNING: Make sure to exactly follow the instructions. Keep the order similar to the provided order of the samples/blanks.</em></p>
<p><em>WARNING: If you use several blanks summed for all samples (like example 3 in the beginning) you can only chose a common division factor.</em></p>
</div>
<div class="section level3">
<h3 id="keep-the-data-in-r-as-data-frame">Keep the data in R as data frame<a class="anchor" aria-label="anchor" href="#keep-the-data-in-r-as-data-frame"></a>
</h3>
<p>If you further want to proceed and analyse the data with R, you can set <em>dataReturn = TRUE</em>. The function will then return a data frame consisting of all measurements of all samples of the selected folder as well as the blanks and raw data.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>                      dataReturn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># only use the fully processed data of all samples:</span></span>
<span><span class="va">allSamples</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">sampleSummary</span> </span></code></pre></div>
<p>You can now proceed with this data and do your analyses or plotting as usual.</p>
</div>
<div class="section level3">
<h3 id="summary-of-each-column-at-the-bottom">Summary of each column at the bottom<a class="anchor" aria-label="anchor" href="#summary-of-each-column-at-the-bottom"></a>
</h3>
<p>The function adds a bottom line to the summary data, if desired. There, each column is summed for custom purpose (e.g., quality control of the function and preliminary steps). However, if you don’t like this line to be in your data set, e.g., because you want to process the data further, you can skipt the calculation by adding <em>eocsum = FALSE</em> to the function call.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>                      eocsum <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="total-particle-numbers">Total particle numbers<a class="anchor" aria-label="anchor" href="#total-particle-numbers"></a>
</h3>
<p>If you would like to get plastic and non-plastic particle numbers, add <em>particleNumbers = TRUE</em> to the function call to get an extra *.xls file with these numbers.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/evalPurency.html">evalPurency</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"C:/users/MYNAME/Desktop/MYFILESTOBEPROCESSED/"</span>, </span>
<span>                      particleNumbers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="use-this-package-in-another-lab">Use this package in another lab<a class="anchor" aria-label="anchor" href="#use-this-package-in-another-lab"></a>
</h2>
<p>The output of Purency can be customized to a certain extend and different labs may have different requirements and conventions on how to name things (also in the language this is done). Therefore, the default settings of this function apply for the animal ecology group of the University of Bayreuth. Unfortunately, there is no smart way to workaround. Thus, this function requires several parameters to preset the working environment of the lab.</p>
<p>To make it as generic and convenient to other labs working with this package, you can overwrite the default settings to your liking. In case you would prefer a complete preset for your lab, that you don’t have to provide each parameter separately, we can implement a preset to your desire if you open an issue or send me a request. A preset can be added quite fast.</p>
<p>A preset can be loaded in the function call by adding the parameter <em>labpreset = “MYOWNLABNAME”</em>.</p>
<p>If no preset is available for your lab, so far, consider the following parameters to be adjusted (just add the necessary parameters as additional parameter in the function call):</p>
<ul>
<li>colPol = 6, Column number where the polymer type is stated. In the TOEKI lab this is column 6 (Class Name). Could also be provided as column name, but only in ASCII encoding (e.g., special character as . and ä = d).</li>
<li>colL = 17, Column number for the particle length. In the TOEKI lab this is column 17 (Length [5µ]). Could also be provided as column name, but only in ASCII encoding (e.g., special character as . and ä = d).</li>
<li>colReqPol = 24, Column number for the particle check, whether the particle is a polymer or not. In the TOEKI lab this is column 24 (Plastik? or Plastik ja/nein). Could also be provided as column name, but only in ASCII encoding (e.g., special character as . and ä = d).</li>
<li>ReqPolKey = “ja”, key words that indicates whether it is a plastic particle or not in ‘colReqPol’.</li>
<li>colShape = 25, Column number for the particle shape. In the TOEKI lab this is column 25 (Form). Could also be provided as column name, but only in ASCII encoding (e.g., special character = . and ä = d).</li>
<li>colCol = 26, Column number for the particle color In the TOEKI lab this is column 26 (Farbe). Could also be provided as column name, but only in ASCII encoding (e.g., special character as . and ä = d).</li>
<li>colLFib = 27, Column number for the particle length in case of a fibre with corrected length (because of curvy shape). In the TOEKI lab this is column 27 (Länge). Could also be provided as column name, but only in ASCII encoding (e.g., special character as . and ä = d).</li>
<li>fibre = “Faser”, How fibres are called in colShape (Form). In the TOEKI lab it is ‘Faser’.</li>
<li>sphere = “Kugel”, How spheres are called in colShape (Form). In the TOEKI lab it is ‘Kugel’.</li>
<li>fragment = “Fragment”, How fragments are called in colShape (Form). In the TOEKI lab it is ‘Fragment’.</li>
<li>pixel = “Pixel”, How pixels are called in colShape (Form). In the TOEKI lab it is ‘Pixel’.</li>
</ul>
<p>I used column numbers here to workaround issues with special characters in some languages which R might has problems with. Numbers provide an unambiguous delimiter. However, we could use column names instead of numbers, as long as they are ASCII encoded or ASCII conform. Nonetheless, we would not recommend this, but rather use column numbers.</p>
<p>With an adopted preset, you can now run the function as mentioned before (just add the preset always to the function).</p>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting:<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>The function was written in Oktober 2022. I’ve used the current column numbers to address the required information. If these will be changed by any chance, this should be adopted to the function as well (see ‘Use this package in another lab’ above to read how). If not, the results are not reliable any more!</p>
<p>The source code can be accessed via github. I’ve commented it quite sophisticated, and changes should be quite easy when you’re a bit into programming. Otherwise open an issue or send me a request, and I will do my best to implement your desired features.</p>
<p>If there are any issues or wishes for changes, you can send me a mail to <a href="mailto:info@maki-science.org" class="email">info@maki-science.org</a> or open an issue here on github (<a href="https://github.com/Maki-science/evalPurency/issues" class="external-link uri">https://github.com/Maki-science/evalPurency/issues</a>).</p>
<ul>
<li>If an error occurs or you get different results, each time the function runs, make sure that you have only the files in the respective folder that should be processed. If you re-run the function, you will have the previously created files there, so you need to delete them first, and then run the function again.</li>
<li>Make sure you considered all points before, where a <em>WARNING</em> was provided.</li>
<li>If the error “Error in read.table(file = file, header = header, sep = sep, quote = quote, : more columns than column names” occurs, it is likely caused by an excess line in the header of your *.csv file. For unkown reason, Purency once in a while creates a file that contains an additional line in its meta-data header (the first 40 or 41 lines, respektively). Usually, the real data set starts at line 41 (with the column header). However, in this case, the data start at line 42. The solution is simple: just delete one of the first 41 lines in the respective file (watch out to respect the correct decimal sign) and run the function again. Now it should run through, as long as there is no further file with that issue.</li>
</ul>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>To cite evalPurency in publications use:</p>
<p>Marvin Kiene, Eva Vizsolyi Cseperke, Martin Löder and Christian Laforsch (2023). evalPurency: Automated Evaluation of Data of the Purency’s Microplastic Finder. R package version 1.3.5.9017. <a href="https://github.com/Maki-science/evalPurency" class="external-link uri">https://github.com/Maki-science/evalPurency</a></p>
<p>A BibTeX-entry for LaTeX-user is</p>
<p>@Misc{, title = {evalPurency: Automated Evaluation of Purency Data}, author = {Marvin Kiene and Eva {Cseperke Vizsolyi} and Martin Löder and Christian Laforsch}, note = {R package version 1.3.5.9017}, year = {2023}, url = {<a href="https://github.com/Maki-science/evalPurency" class="external-link uri">https://github.com/Maki-science/evalPurency</a>}, }</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Maki-science/evalPurency/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Maki-science/evalPurency/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing evalPurency</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Marvin Kiene <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9981-5661" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Eva Cseperke Vizsolyi <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9786-1071" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Martin Löder <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3034-9305" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Christian Laforsch <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9981-5661" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=evalPurency" class="external-link"><img src="https://www.r-pkg.org/badges/version/evalPurency" alt="CRAN status"></a></li>
<li><a href="https://github.com/Maki-science/evalPurency/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Maki-science/evalPurency/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/Maki-science/evalPurency?branch=main" class="external-link"><img src="https://codecov.io/gh/Maki-science/evalPurency/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marvin Kiene, Eva Cseperke Vizsolyi, Martin Löder, Christian Laforsch.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
